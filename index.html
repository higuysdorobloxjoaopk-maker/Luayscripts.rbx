<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Luay $cripts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      margin: 0;
      background: linear-gradient(135deg, #4b1fa6, #6a1fbf, #8b2cff);
      color: white;
      min-height: 100vh;
    }

    /* ---------- TOPBAR ---------- */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(20, 10, 50, 0.8);
      backdrop-filter: blur(10px);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }

    .logo {
      font-size: 24px;
      font-weight: 800;
      letter-spacing: 1px;
      background: linear-gradient(90deg, #fff, #caa8ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .search-box {
      flex: 1;
      max-width: 520px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: none;
      outline: none;
      font-size: 15px;
      background: rgba(255,255,255,0.15);
      color: white;
    }

    .search-box input::placeholder {
      color: rgba(255,255,255,0.7);
    }

    .top-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .btn {
      padding: 10px 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: 0.2s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.1);
    }

    .btn-green {
      background: linear-gradient(135deg, #00ff9c, #00c27a);
      color: #032b1a;
      box-shadow: 0 0 15px rgba(0,255,156,0.4);
    }

    .btn-purple {
      background: rgba(255,255,255,0.15);
      color: white;
    }

    /* ---------- LISTA ---------- */
    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 16px 60px;
    }

    .scripts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .script-card {
      background: rgba(20, 10, 50, 0.65);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      transition: 0.25s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }

    .script-card:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 18px 45px rgba(0,0,0,0.45);
    }

    .script-banner {
      width: 100%;
      height: 150px;
      background: #1a083a;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .script-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .script-content {
      padding: 14px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      flex: 1;
    }

    .script-title {
      font-weight: 700;
      font-size: 16px;
      line-height: 1.2;
    }

    .script-desc {
      font-size: 13px;
      opacity: 0.85;
      line-height: 1.4;
      flex: 1;
    }

    .script-footer {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 6px;
    }

    .creator-avatar {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      object-fit: cover;
      background: #333;
      flex-shrink: 0;
    }

    .creator-name {
      font-size: 13px;
      font-weight: 600;
      opacity: 0.9;
    }

    /* ---------- EMPTY STATE ---------- */
    .empty-state {
      width: 100%;
      min-height: 60vh;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .empty-state img {
      max-width: 420px;
      width: 100%;
      opacity: 0.9;
    }

    /* ---------- MODAL ---------- */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(6px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 16px;
    }

    .modal {
      background: linear-gradient(135deg, #1c0a3f, #2b0f63);
      border-radius: 20px;
      max-width: 900px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 30px 80px rgba(0,0,0,0.6);
      animation: pop 0.25s ease;
    }

    @keyframes pop {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-banner {
      width: 100%;
      height: 220px;
      background: #14052e;
      overflow: hidden;
      border-radius: 20px 20px 0 0;
    }

    .modal-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal-body {
      padding: 20px 22px 24px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .modal-title {
      font-size: 22px;
      font-weight: 800;
    }

    .modal-desc {
      font-size: 14px;
      opacity: 0.9;
      line-height: 1.5;
    }

    .modal-creator {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 6px;
      cursor: pointer;
      width: fit-content;
    }

    .modal-creator img {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      object-fit: cover;
    }

    .modal-creator span {
      font-weight: 600;
      font-size: 14px;
    }

    .code-block {
      background: #0c031d;
      border-radius: 14px;
      padding: 14px;
      font-family: monospace;
      font-size: 13px;
      white-space: pre-wrap;
      line-height: 1.5;
      overflow-x: auto;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .btn-copy {
      background: linear-gradient(135deg, #7b4cff, #9b6cff);
      color: white;
      box-shadow: 0 0 15px rgba(155,108,255,0.4);
    }

    .btn-download {
      background: rgba(255,255,255,0.15);
      color: white;
    }

    .btn-close {
      position: absolute;
      top: 14px;
      right: 14px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(0,0,0,0.5);
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ---------- COMMENTS (BASE) ---------- */
    .comments {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .comment {
      background: rgba(255,255,255,0.08);
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 13px;
    }

    .comment-input {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .comment-input input {
      flex: 1;
      border-radius: 10px;
      border: none;
      outline: none;
      padding: 8px 10px;
      background: rgba(255,255,255,0.15);
      color: white;
      font-size: 13px;
    }

    .comment-input button {
      border-radius: 10px;
      border: none;
      padding: 8px 14px;
      background: linear-gradient(135deg, #7b4cff, #9b6cff);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    /* ---------- RESPONSIVE ---------- */
    @media (max-width: 600px) {
      .logo {
        font-size: 18px;
      }
      .top-actions {
        gap: 6px;
      }
      .btn {
        padding: 8px 12px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

  <!-- ================= TOPBAR ================= -->
  <div class="topbar">
    <div class="logo">Luay $cripts</div>

    <div class="search-box">
      <input id="searchInput" type="text" placeholder='Pesquisar... ex: script ou | criador.script | criador.' />
    </div>

    <div class="top-actions">
      <a href="https://discord.gg/SEU_SERVIDOR" target="_blank" class="btn btn-green">Publicar</a>
      <a href="https://discord.com/users/SEU_BOT_ID" target="_blank" class="btn btn-purple">Denunciar</a>
    </div>
  </div>

  <!-- ================= LISTA ================= -->
  <div class="container">
    <div id="scriptsGrid" class="scripts-grid"></div>

    <div id="emptyState" class="empty-state">
      <img src="https://i.imgur.com/COLOQUE_SUA_IMAGEM.png" alt="Nada encontrado">
    </div>
  </div>

  <!-- ================= MODAL ================= -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <button class="btn-close" onclick="closeModal()">칑</button>
      <div id="modalBanner" class="modal-banner"></div>
      <div class="modal-body">
        <div id="modalTitle" class="modal-title"></div>
        <div id="modalDesc" class="modal-desc"></div>

        <div id="modalCreator" class="modal-creator"></div>

        <div id="modalCode" class="code-block"></div>

        <div class="modal-actions">
          <button class="btn btn-copy" onclick="copyCode()">游늶 Copiar</button>
          <button class="btn btn-download" onclick="downloadCode()">拘勇 Baixar</button>
        </div>

        <div class="comments">
          <div class="comment">游눫 Coment치rios em breve...</div>

          <div class="comment-input">
            <input type="text" placeholder="Digite seu coment치rio..." disabled />
            <button disabled>></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPT ================= -->
  <script>
    const SCRIPTS_URL = "./scripts.json";

    const grid = document.getElementById("scriptsGrid");
    const emptyState = document.getElementById("emptyState");
    const searchInput = document.getElementById("searchInput");

    const modalOverlay = document.getElementById("modalOverlay");
    const modalBanner = document.getElementById("modalBanner");
    const modalTitle = document.getElementById("modalTitle");
    const modalDesc = document.getElementById("modalDesc");
    const modalCreator = document.getElementById("modalCreator");
    const modalCode = document.getElementById("modalCode");

    let allScripts = [];
    let currentScript = null;

    async function loadScripts() {
      try {
        const res = await fetch(SCRIPTS_URL + "?v=" + Date.now());
        const data = await res.json();
        if (Array.isArray(data)) {
          allScripts = data;
          renderScripts(allScripts);
        } else {
          throw new Error("Formato inv치lido");
        }
      } catch (e) {
        console.error("Erro ao carregar scripts:", e);
        allScripts = [];
        renderScripts([]);
      }
    }

    function renderScripts(list) {
      grid.innerHTML = "";

      if (!list.length) {
        emptyState.style.display = "flex";
        return;
      } else {
        emptyState.style.display = "none";
      }

      for (const s of list) {
        const card = document.createElement("div");
        card.className = "script-card";
        card.onclick = () => openModal(s);

        const banner = document.createElement("div");
        banner.className = "script-banner";
        if (s.banner) {
          const img = document.createElement("img");
          img.src = s.banner;
          banner.appendChild(img);
        } else {
          banner.textContent = "No banner";
          banner.style.opacity = "0.4";
          banner.style.fontSize = "13px";
        }

        const content = document.createElement("div");
        content.className = "script-content";

        const title = document.createElement("div");
        title.className = "script-title";
        title.textContent = s.title;

        const desc = document.createElement("div");
        desc.className = "script-desc";
        desc.textContent = s.description;

        const footer = document.createElement("div");
        footer.className = "script-footer";

        const avatar = document.createElement("img");
        avatar.className = "creator-avatar";
        avatar.src = s.creator_avatar || "";
        avatar.onerror = () => avatar.style.display = "none";

        const name = document.createElement("div");
        name.className = "creator-name";
        name.textContent = s.creator_name;

        footer.appendChild(avatar);
        footer.appendChild(name);

        content.appendChild(title);
        content.appendChild(desc);
        content.appendChild(footer);

        card.appendChild(banner);
        card.appendChild(content);

        grid.appendChild(card);
      }
    }

    function normalize(str) {
      return (str || "").toLowerCase().trim();
    }

    function applySearch(query) {
      query = normalize(query);

      if (!query) {
        renderScripts(allScripts);
        return;
      }

      let results = [];

      // Caso: criador.script
      if (query.includes(".")) {
        const [creator, script] = query.split(".", 2).map(normalize);

        results = allScripts.filter(s => {
          const creatorMatch = normalize(s.creator_name).includes(creator);
          const scriptMatch = script ? normalize(s.title).includes(script) : true;
          return creatorMatch && scriptMatch;
        });

        renderScripts(results);
        return;
      }

      // Caso: "script ou" => OR search
      if (query.includes(" ")) {
        const parts = query.split(" ").filter(Boolean);
        results = allScripts.filter(s =>
          parts.some(p => normalize(s.title).includes(p))
        );
        renderScripts(results);
        return;
      }

      // Caso padr칚o: busca simples por t칤tulo
      results = allScripts.filter(s =>
        normalize(s.title).includes(query)
      );

      renderScripts(results);
    }

    searchInput.addEventListener("input", e => {
      applySearch(e.target.value);
    });

    function openModal(script) {
      currentScript = script;

      modalBanner.innerHTML = "";
      if (script.banner) {
        const img = document.createElement("img");
        img.src = script.banner;
        modalBanner.appendChild(img);
      }

      modalTitle.textContent = script.title;
      modalDesc.textContent = script.description;

      modalCreator.innerHTML = "";
      const av = document.createElement("img");
      av.src = script.creator_avatar || "";
      av.onerror = () => av.style.display = "none";
      const name = document.createElement("span");
      name.textContent = script.creator_name;

      modalCreator.appendChild(av);
      modalCreator.appendChild(name);

      modalCreator.onclick = () => {
        if (script.creator_id) {
          window.open(`https://discord.com/users/${script.creator_id}`, "_blank");
        }
      };

      modalCode.textContent = script.code || "";

      modalOverlay.style.display = "flex";
      document.body.style.overflow = "hidden";
    }

    function closeModal() {
      modalOverlay.style.display = "none";
      document.body.style.overflow = "";
      currentScript = null;
    }

    modalOverlay.addEventListener("click", e => {
      if (e.target === modalOverlay) closeModal();
    });

    function copyCode() {
      if (!currentScript) return;
      navigator.clipboard.writeText(currentScript.code || "");
      alert("C칩digo copiado!");
    }

    function downloadCode() {
      if (!currentScript) return;
      const blob = new Blob([currentScript.code || ""], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = (currentScript.title || "script") + ".txt";
      a.click();
      URL.revokeObjectURL(url);
    }

    loadScripts();
  </script>

</body>
</html>
